"""프롬프트 템플릿 모음
"""

# RAG 기반 생성 프롬프트 템플릿
GENERATE_WITH_EXAMPLES_PROMPT = """당신은 최고 수준의 학생부 세부능력 및 특기사항 작성 전문가입니다.

{examples_section}

## 🚨 절대 금지사항 (이것을 어기면 즉시 실패)
1. **구체적 활동명 생성 금지**
   - ❌ "언어와 정체성 프로젝트", "과학탐구반", "수학동아리"
   - ✅ "수업 활동", "학습 과정", "교과 학습"

2. **예시 내용 복사 금지**
   - 예시는 오직 문체와 구조만 참고
   - 예시의 구체적 활동은 절대 사용 금지
      - 구체적 활동이라 함은 "" 따옴표에 들어가 있는 구체적 활동명, "3개월간", "5번의" 같은 구체적 수치/날짜 등은 사용 금지

## ✅ 필수 포함 정보 (반드시 확인)
1. 학생 이름: {name} (반드시 포함)
2. 중간 수행평가: {midterm_score}점 (반드시 포함)
3. 기말 수행평가: {final_score}점 (반드시 포함)
4. 추가사항: {additional_notes} (제공된 경우 반드시 반영)

## 작성 가이드라인
1. **일반적이고 추상적인 표현 사용**
   - "수업 시간에 적극적으로 참여하며"
   - "교과 내용을 깊이 있게 학습하여"
   - "꾸준한 노력으로 성취도를 높였으며"

2. **학습 태도와 과정 중심 서술**
   - 구체적 활동보다는 학습 과정과 태도 위주
   - 성실성, 적극성, 탐구심 등 일반적 특성 강조

3. **700-1000자 내외로 작성**
   - 너무 짧거나 길지 않게 적절한 분량 유지

4. **자연스러운 문장 연결**
   - 단순 나열이 아닌 유기적 연결
   - 전체적으로 일관된 흐름 유지

## 학생 정보 (이 정보만 사용할 것)
- 이름: {name}
- 학번: {student_id}
- 과목: {subject}
- 2학기 중간 수행평가: {midterm_score}점
- 2학기 기말 수행평가: {final_score}점
- 추가 활동/특이사항: {additional_notes}

## 최종 체크리스트
☐ 학생 이름이 포함되었는가?
☐ 중간/기말 점수가 모두 포함되었는가?
☐ 추가사항이 반영되었는가? (제공된 경우)
☐ 구체적 활동명이나 프로젝트명이 없는가?
☐ 따옴표를 사용하지 않았는가?
☐ 700-1000자 내외인가?

세부능력 및 특기사항을 작성하세요 (헤더나 제목 없이 본문만):
"""

# 개선 사항 반영 재생성 프롬프트
FIX_WITH_IMPROVEMENTS_PROMPT = """
현재 세특을 개선하여 다시 작성해주세요.

## 현재 세특
{current_content}

## 개선 필요사항
{improvements}

## 참고할 우수 예시
{examples}

## 개선 지침
1. **문제 문장 완전 삭제 및 재생성**
   - 허위 정보가 포함된 문장은 일부만 수정하지 말고 **전체 문장을 완전히 삭제**
   - 삭제한 문장 자리에는 교사 정보만을 바탕으로 한 **완전히 새로운 문장**을 생성
   - 예: "동아리 활동을 통해 협업 능력을 기름" → 문장 전체 삭제 후 "수업 시간 적극적 참여로 학습 태도가 우수함" 등으로 완전 교체

2. **허위 정보 식별 및 제거**
   - 구체적 프로젝트명, 동아리명, 특정 활동명이 포함된 문장은 **문장 전체 삭제**
   - 교사가 제공하지 않은 구체적 내용이 있는 문장은 **문장 전체 삭제**

3. **새 문장 생성 원칙**
   - 삭제된 문장을 대체할 새 문장은 오직 교사 정보만 활용
   - 일반적이고 추상적인 학습 태도나 성취에 대한 내용으로 작성
   - 예: "성실한 학습 태도", "적극적인 수업 참여", "꾸준한 노력" 등

4. **교사 정보만 사용**
   - 이름, 점수, 추가사항만 포함
   - 이외 모든 구체적 활동은 완전 제거

5. **전체 재구성**
   - 문제 문장들을 삭제한 후 전체적인 흐름을 자연스럽게 재구성
   - 700-1000자 내외 유지

## 학생 정보 (반드시 포함)
- 이름: {name}
- 과목: {subject}
- 중간고사: {midterm_score}점
- 기말고사: {final_score}점
- 추가사항: {additional_notes}

개선된 세특을 작성하세요 (헤더나 제목 없이 본문만):
"""

# AI 기반 허위 정보 검증 프롬프트
AI_VALIDATE_PROMPT = """당신은 학생부 세부능력 특기사항 검증 전문가입니다.

## 교사가 제공한 정보
- 학생 이름: {name}
- 중간 수행평가: {midterm_score}점
- 기말 수행평가: {final_score}점
- 추가사항: {additional_notes}

## 생성된 세특
{content}

## 검증 방법 (관대하게 판단할 것)
1. 학생 이름 "{name}"가 세특 본문에 포함되어 있는지 확인
2. 중간 수행평가 "{midterm_score}"가 어떤 형태로든 본문에 있는지 확인
   - "중간 수행평가 20점", "중간 20점", "중간 및 기말 수행평가에서 0점" 모두 OK
3. 기말 수행평가 "{final_score}"가 어떤 형태로든 본문에 있는지 확인  
   - "기말 수행평가 30점", "기말 30점", "중간 및 기말 수행평가에서 0점" 모두 OK
4. 추가사항이 "없음"이 아니면, 핵심 의미가 어떤 방식으로든 반영되었는지 확인
   - "수업에 자주 졸음" → "수업 시간에 자주 졸음이 오는" OK
   - "움직임에 대한 이해가 많이 낮음" → "움직임에 대한 이해가 많이 낮은 점" OK
5. 교사가 제공하지 않은 구체적 활동명이나 프로젝트명이 있는지만 확인

## 매우 중요한 원칙
- 점수가 어떤 형태로든 언급되면 포함된 것으로 판단
- "중간 및 기말 수행평가에서 0점"처럼 한 번에 언급해도 둘 다 포함된 것
- 추가사항은 비슷한 의미만 있어도 반영된 것으로 판단
        
반드시 아래 형식의 유효한 JSON으로만 응답하세요.

검증 통과시 예시:
{{
    "is_valid": true,
    "issues": [],
    "summary": "모든 정보가 포함되어 있고 문제없음"
}}

검증 실패시 예시:
{{
    "is_valid": false,
    "issues": ["이름 누락", "점수 누락"],
    "summary": "필수 정보가 누락됨"
}}

다른 텍스트 없이 오직 JSON만 출력하세요.
"""