"""프롬프트 템플릿 모음
"""



# RAG 기반 생성 프롬프트 템플릿
GENERATE_WITH_EXAMPLES_PROMPT = """당신은 최고 수준의 학생부 세부능력 및 특기사항 작성 전문가입니다.

{examples_section}

## 작성 요구사항
1. 위 예시들과 동일한 수준의 구체성과 전문성으로 작성
2. 학생의 탐구 활동, 관심사, 노력이 드러나도록 작성
3. 교과 지식의 깊이와 응용 능력이 나타나도록 작성
4. 가능한 경우 융합적 사고나 창의성 언급
5. 700-1000자 내외로 작성
6. **중요: 절대 허위 정보 생성 금지**
   - 학생이 실제로 하지 않은 활동은 절대 언급 금지
   - 구체적인 프로젝트명, 동아리명, 발표 주제 등은 절대 지어내지 말 것
   - 예시의 내용을 절대 복사하거나 유사하게 변형하지 말 것
   - 제공된 학생 정보 외에는 추가 정보 생성 금지
7. **예시 활용 지침**
   - 예시는 문체, 구조, 표현 방식만 참고할 것
   - 예시의 구체적 활동, 프로젝트, 내용은 절대 사용 금지
   - 일반적이고 추상적인 표현으로만 작성할 것
8. 반드시 아래 학생 정보를 모두 포함

## 학생 정보
- 이름: {name}
- 학번: {student_id}
- 과목: {subject}
- 2학기 중간 수행평가: {midterm_score}점
- 2학기 기말 수행평가: {final_score}점
- 추가 활동/특이사항: {additional_notes}

세부능력 및 특기사항을 작성하세요 (헤더나 제목 없이 본문만):
"""

# 개선 사항 반영 재생성 프롬프트
FIX_WITH_IMPROVEMENTS_PROMPT = """
현재 세특을 개선하여 다시 작성해주세요.

## 현재 세특
{current_content}

## 개선 필요사항
{improvements}

## 참고할 우수 예시
{examples}

## 개선 지침
1. **문제 문장 완전 삭제 및 재생성**
   - 허위 정보가 포함된 문장은 일부만 수정하지 말고 **전체 문장을 완전히 삭제**
   - 삭제한 문장 자리에는 교사 정보만을 바탕으로 한 **완전히 새로운 문장**을 생성
   - 예: "동아리 활동을 통해 협업 능력을 기름" → 문장 전체 삭제 후 "수업 시간 적극적 참여로 학습 태도가 우수함" 등으로 완전 교체

2. **허위 정보 식별 및 제거**
   - 구체적 프로젝트명, 동아리명, 특정 활동명이 포함된 문장은 **문장 전체 삭제**
   - 교사가 제공하지 않은 구체적 내용이 있는 문장은 **문장 전체 삭제**

3. **새 문장 생성 원칙**
   - 삭제된 문장을 대체할 새 문장은 오직 교사 정보만 활용
   - 일반적이고 추상적인 학습 태도나 성취에 대한 내용으로 작성
   - 예: "성실한 학습 태도", "적극적인 수업 참여", "꾸준한 노력" 등

4. **교사 정보만 사용**
   - 이름, 점수, 추가사항만 포함
   - 이외 모든 구체적 활동은 완전 제거

5. **전체 재구성**
   - 문제 문장들을 삭제한 후 전체적인 흐름을 자연스럽게 재구성
   - 700-1000자 내외 유지

## 학생 정보 (반드시 포함)
- 이름: {name}
- 과목: {subject}
- 중간고사: {midterm_score}점
- 기말고사: {final_score}점
- 추가사항: {additional_notes}

개선된 세특을 작성하세요 (헤더나 제목 없이 본문만):
"""

# AI 기반 허위 정보 검증 프롬프트
AI_VALIDATE_PROMPT = """당신은 학생부 세부능력 특기사항 검증 전문가입니다.

## 검증 작업
생성된 세특에서 교사가 제공하지 않은 허위 정보를 찾아내는 것이 목표입니다.

## 교사가 제공한 정보
- 학생 이름: {name}
- 과목: {subject}  
- 중간고사: {midterm_score}점
- 기말고사: {final_score}점
- 추가사항: {additional_notes}

## 참고된 예시 (이 내용은 다른 학생의 것임)
{retrieved_examples}

## 생성된 세특
{content}

## 검증 규칙
1. **필수 정보 확인**: 이름, 점수가 정확히 포함되었는지
2. **구체적 허위 정보만 탐지** (다음 항목만 문제로 지적):
   - 구체적인 프로젝트명 (예: "언어와 정체성 프로젝트")
   - 구체적인 책 제목이나 작품명
   - 특정 동아리명 (예: "과학탐구반", "문학동아리")
   - 구체적인 대회나 행사명
   - 참고 예시에서 그대로 가져온 내용
   - 따옴표로 둘러싸인 특정 주제명
3. **허용되는 일반적 표현** (문제로 지적하지 말 것):
   - "깊이 있는 질문을 던지며"
   - "적극적으로 참여하며"
   - "탐구 활동을 진행함"
   - "그룹 활동에 참여"
   - 일반적인 학습 태도 묘사
4. **추가사항 반영**: 제공된 추가사항이 적절히 반영되었는지

## 중요
- 구체적이고 검증 가능한 정보만 문제로 지적
- 일반적인 학습 태도나 수업 참여는 허용
- 예시: "언어와 사회"처럼 따옴표로 된 구체적 주제는 문제, "수업에 적극 참여"는 허용

JSON 형식으로만 응답하세요:
{{
    "is_valid": true/false,
    "issues": [
        {{
            "type": "false_info/missing_info/copied_content",
            "description": "구체적 문제 설명",
            "problematic_text": "문제가 되는 원문 텍스트",
            "suggestion": "제거하거나 수정해야 할 내용"
        }}
    ],
    "needs_fix": true/false,
    "summary": "전체적인 검증 결과 요약"
}}
"""